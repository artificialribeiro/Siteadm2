<!DOCTYPE html>
<html lang="pt-BR" class="dark">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>Boutique Diniz - Painel Gerencial</title>

    <link rel="icon" href="logo.png" type="image/png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"/>
    <script src="https://cdn.tailwindcss.com"></script>

    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: { "brand-black": "#000000", "brand-dark": "#0a0a0a", "brand-gray": "#121212" },
                    fontFamily: { "sans": ["'Montserrat'", "sans-serif"] },
                    animation: {
                        'fade-in-up': 'fadeInUp 0.7s cubic-bezier(0.16, 1, 0.3, 1) forwards',
                        'pulse-slow': 'pulse 3s infinite',
                    },
                    keyframes: {
                        fadeInUp: { '0%': { opacity: '0', transform: 'translateY(24px)' }, '100%': { opacity: '1', transform: 'translateY(0)' } }
                    }
                }
            }
        }
    </script>

    <style>
        .card-glow { transition: all 0.35s cubic-bezier(0.16, 1, 0.3, 1); }
        .card-glow:hover { transform: translateY(-4px); box-shadow: 0 12px 32px -10px rgba(255,255,255,0.08); border-color: rgba(255,255,255,0.18); }
        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #2a2a2a; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #fff; }

        /* Skeleton loader */
        @keyframes shimmer { 0%{background-position:-600px 0} 100%{background-position:600px 0} }
        .skeleton { background: linear-gradient(90deg,#181818 25%,#222 50%,#181818 75%); background-size: 1200px 100%; animation: shimmer 1.6s infinite linear; border-radius:8px; }

        /* Barra de progresso */
        .bar-fill { transition: width 1.2s cubic-bezier(0.16,1,0.3,1); }

        /* Alertas badge */
        .badge-alert  { background:rgba(248,113,113,0.12); color:#f87171; border:1px solid rgba(248,113,113,0.3); }
        .badge-warn   { background:rgba(250,204,21,0.10);  color:#facc15; border:1px solid rgba(250,204,21,0.25); }
        .badge-ok     { background:rgba(74,222,128,0.10);  color:#4ade80; border:1px solid rgba(74,222,128,0.25); }
        .badge-info   { background:rgba(148,163,184,0.08); color:#94a3b8; border:1px solid rgba(148,163,184,0.2); }

        /* Dot status caixa */
        .dot-aberto   { background:#4ade80; }
        .dot-pendente { background:#facc15; }
        .dot-fechado  { background:#3f3f46; }

        /* Linhas de lista */
        .list-row { transition: background 0.18s ease; }
        .list-row:hover { background: rgba(255,255,255,0.03); }
    </style>

    <script src="token.js"></script>
    <script src="seguranca.js" defer></script>
    <script src="menu.js" defer></script>
    <script src="dashboard.js" defer></script>
</head>
<body class="bg-brand-black text-white font-sans h-screen w-full overflow-hidden flex selection:bg-white selection:text-black">

    <div class="fixed inset-0 pointer-events-none bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-gray-900/10 via-brand-black to-brand-black z-0"></div>

    <main class="flex-1 flex flex-col h-screen overflow-hidden relative z-10">

        <!-- HEADER -->
        <header class="h-24 bg-brand-dark/70 backdrop-blur-lg border-b border-gray-900/50 flex items-center justify-between px-8 shrink-0 z-20 sticky top-0">
            <button id="btn-open-menu" class="md:hidden text-white hover:text-gray-300 focus:outline-none transition-colors">
                <span class="material-icons text-3xl">menu_open</span>
            </button>
            <div class="hidden md:flex items-center gap-2 text-xs font-medium tracking-widest uppercase text-gray-500">
                <span class="material-icons text-sm">home</span>
                <span>/</span>
                <span class="text-white">Dashboard</span>
            </div>
            <div class="flex items-center gap-4">
                <!-- Botão refresh -->
                <button id="btn-refresh" title="Atualizar dados" class="w-10 h-10 rounded-full bg-transparent border border-gray-800 flex items-center justify-center text-gray-400 hover:text-white hover:border-white transition-colors">
                    <span class="material-icons text-lg" id="refresh-icon">refresh</span>
                </button>
                <!-- Data/hora -->
                <div class="hidden lg:flex flex-col items-end mr-2">
                    <p id="dash-data" class="text-xs text-gray-300 font-medium"></p>
                    <p id="dash-hora" class="text-[10px] text-gray-600 tracking-widest font-mono"></p>
                </div>
                <div class="text-right hidden sm:block">
                    <p id="topbar-user-name" class="text-sm font-medium text-white">Carregando...</p>
                    <p id="topbar-user-role" class="text-[10px] text-gray-500 uppercase tracking-widest">Acesso</p>
                </div>
                <div class="w-12 h-12 rounded-full bg-gray-900 border border-gray-700 flex items-center justify-center text-white font-light text-xl shadow-lg">
                    <span id="topbar-user-initial"></span>
                </div>
            </div>
        </header>

        <!-- CONTEÚDO -->
        <div class="flex-1 overflow-y-auto p-4 md:p-8 scroll-smooth relative z-10">
            <div class="max-w-7xl mx-auto space-y-8">

                <!-- TÍTULO -->
                <div class="opacity-0 animate-fade-in-up" style="animation-delay:0.05s;">
                    <h3 class="text-3xl font-light tracking-wide text-white">Visão Geral</h3>
                    <p class="text-sm text-gray-500 mt-1 font-light tracking-wide">Resultados em tempo real — <span id="label-filial" class="text-gray-400">carregando...</span></p>
                </div>

                <!-- ── LINHA 1: CARDS PRINCIPAIS ── -->
                <div class="grid grid-cols-2 lg:grid-cols-4 gap-4 opacity-0 animate-fade-in-up" style="animation-delay:0.1s;">

                    <!-- Vendas Loja (caixa hoje) -->
                    <div class="card-glow bg-brand-gray/50 backdrop-blur-sm border border-gray-800/80 p-5 rounded-xl relative overflow-hidden group">
                        <div class="absolute top-0 right-0 w-24 h-24 bg-white/5 rounded-full blur-2xl -mr-10 -mt-10 group-hover:bg-white/10 transition-all"></div>
                        <div class="flex justify-between items-start relative z-10">
                            <div class="flex-1 min-w-0">
                                <p class="text-[10px] text-gray-500 uppercase tracking-widest mb-2 flex items-center gap-1.5">
                                    <span class="w-1.5 h-1.5 rounded-full bg-white inline-block"></span> Vendas Loja
                                </p>
                                <h4 class="text-2xl font-light text-white truncate">R$ <span id="card-vendas-loja" class="font-medium">—</span></h4>
                                <p id="card-vendas-loja-sub" class="text-[10px] text-gray-600 mt-1.5">—</p>
                            </div>
                            <span class="material-icons text-gray-700 group-hover:text-white transition-colors duration-300 shrink-0 ml-2">storefront</span>
                        </div>
                    </div>

                    <!-- Vendas Site (pedidos aprovados hoje) -->
                    <div class="card-glow bg-brand-gray/50 backdrop-blur-sm border border-gray-800/80 p-5 rounded-xl relative overflow-hidden group">
                        <div class="absolute top-0 right-0 w-24 h-24 bg-white/5 rounded-full blur-2xl -mr-10 -mt-10 group-hover:bg-white/10 transition-all"></div>
                        <div class="flex justify-between items-start relative z-10">
                            <div class="flex-1 min-w-0">
                                <p class="text-[10px] text-gray-500 uppercase tracking-widest mb-2 flex items-center gap-1.5">
                                    <span class="w-1.5 h-1.5 rounded-full bg-gray-400 inline-block"></span> Vendas Site
                                </p>
                                <h4 class="text-2xl font-light text-white truncate">R$ <span id="card-vendas-site" class="font-medium">—</span></h4>
                                <p id="card-vendas-site-sub" class="text-[10px] text-gray-600 mt-1.5">—</p>
                            </div>
                            <span class="material-icons text-gray-700 group-hover:text-white transition-colors duration-300 shrink-0 ml-2">language</span>
                        </div>
                    </div>

                    <!-- Pedidos Hoje -->
                    <div class="card-glow bg-brand-gray/50 backdrop-blur-sm border border-gray-800/80 p-5 rounded-xl relative overflow-hidden group">
                        <div class="absolute top-0 right-0 w-24 h-24 bg-white/5 rounded-full blur-2xl -mr-10 -mt-10 group-hover:bg-white/10 transition-all"></div>
                        <div class="flex justify-between items-start relative z-10">
                            <div class="flex-1 min-w-0">
                                <p class="text-[10px] text-gray-500 uppercase tracking-widest mb-2 flex items-center gap-1.5">
                                    <span class="w-1.5 h-1.5 rounded-full bg-gray-600 inline-block"></span> Pedidos Hoje
                                </p>
                                <h4 class="text-2xl font-light text-white"><span id="card-pedidos" class="font-medium">—</span></h4>
                                <p id="card-pedidos-sub" class="text-[10px] text-gray-600 mt-1.5">—</p>
                            </div>
                            <span class="material-icons text-gray-700 group-hover:text-white transition-colors duration-300 shrink-0 ml-2">receipt_long</span>
                        </div>
                    </div>

                    <!-- Alertas de Estoque -->
                    <div class="card-glow bg-brand-gray/50 backdrop-blur-sm border border-gray-800/80 p-5 rounded-xl relative overflow-hidden group">
                        <div class="absolute top-0 right-0 w-24 h-24 bg-white/5 rounded-full blur-2xl -mr-10 -mt-10 group-hover:bg-white/10 transition-all"></div>
                        <div class="flex justify-between items-start relative z-10">
                            <div class="flex-1 min-w-0">
                                <p class="text-[10px] text-gray-500 uppercase tracking-widest mb-2 flex items-center gap-1.5">
                                    <span class="w-1.5 h-1.5 rounded-full bg-gray-500 inline-block"></span> Estoque Baixo
                                </p>
                                <h4 class="text-2xl font-light text-white"><span id="card-estoque-alerta" class="font-medium">—</span></h4>
                                <p id="card-estoque-sub" class="text-[10px] text-gray-600 mt-1.5">—</p>
                            </div>
                            <span id="card-estoque-icon" class="material-icons text-gray-700 group-hover:text-white transition-colors duration-300 shrink-0 ml-2">inventory_2</span>
                        </div>
                    </div>
                </div>

                <!-- ── LINHA 2: CAIXAS + FINANCEIRO ── -->
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-4 opacity-0 animate-fade-in-up" style="animation-delay:0.18s;">

                    <!-- Status dos Caixas -->
                    <div class="card-glow bg-brand-gray/50 backdrop-blur-sm border border-gray-800/80 rounded-xl overflow-hidden">
                        <div class="px-5 py-4 border-b border-gray-800/60 flex items-center justify-between">
                            <div>
                                <p class="text-xs font-medium text-white tracking-wide">Caixas Hoje</p>
                                <p class="text-[10px] text-gray-500 mt-0.5">Status por filial</p>
                            </div>
                            <span class="material-icons text-gray-600 text-lg">account_balance_wallet</span>
                        </div>
                        <div id="lista-caixas" class="px-5 py-3 space-y-2 min-h-[100px]">
                            <div class="skeleton h-8 w-full"></div>
                            <div class="skeleton h-8 w-3/4"></div>
                        </div>
                        <div class="px-5 pb-4 pt-1 flex gap-4 text-[10px] text-gray-500">
                            <span id="dash-caixas-abertos" class="flex items-center gap-1"><span class="w-2 h-2 rounded-full bg-green-400 inline-block"></span>— aberto(s)</span>
                            <span id="dash-caixas-pendentes" class="flex items-center gap-1"><span class="w-2 h-2 rounded-full bg-yellow-400 inline-block"></span>— pend.</span>
                        </div>
                    </div>

                    <!-- Contas a Pagar -->
                    <div class="card-glow bg-brand-gray/50 backdrop-blur-sm border border-gray-800/80 rounded-xl overflow-hidden">
                        <div class="px-5 py-4 border-b border-gray-800/60 flex items-center justify-between">
                            <div>
                                <p class="text-xs font-medium text-white tracking-wide">Contas a Pagar</p>
                                <p class="text-[10px] text-gray-500 mt-0.5">Próximos 7 dias + vencidas</p>
                            </div>
                            <span class="material-icons text-gray-600 text-lg">payments</span>
                        </div>
                        <div class="px-5 py-4 space-y-3">
                            <div class="flex justify-between items-center">
                                <div>
                                    <p class="text-[10px] text-gray-500 uppercase tracking-widest">Vencendo em 7 dias</p>
                                    <p class="text-xl font-light text-white mt-0.5">R$ <span id="pagar-7dias-valor" class="font-medium">—</span></p>
                                </div>
                                <span id="pagar-7dias-badge" class="text-[10px] px-2.5 py-1 rounded-full font-medium badge-info">— contas</span>
                            </div>
                            <div class="h-px bg-gray-800/60"></div>
                            <div class="flex justify-between items-center">
                                <div>
                                    <p class="text-[10px] text-gray-500 uppercase tracking-widest">Vencidas</p>
                                    <p class="text-xl font-light text-white mt-0.5">R$ <span id="pagar-vencidas-valor" class="font-medium">—</span></p>
                                </div>
                                <span id="pagar-vencidas-badge" class="text-[10px] px-2.5 py-1 rounded-full font-medium badge-info">— contas</span>
                            </div>
                        </div>
                    </div>

                    <!-- Contas a Receber -->
                    <div class="card-glow bg-brand-gray/50 backdrop-blur-sm border border-gray-800/80 rounded-xl overflow-hidden">
                        <div class="px-5 py-4 border-b border-gray-800/60 flex items-center justify-between">
                            <div>
                                <p class="text-xs font-medium text-white tracking-wide">Contas a Receber</p>
                                <p class="text-[10px] text-gray-500 mt-0.5">Pendências em aberto</p>
                            </div>
                            <span class="material-icons text-gray-600 text-lg">account_balance</span>
                        </div>
                        <div class="px-5 py-4 space-y-3">
                            <div class="flex justify-between items-center">
                                <div>
                                    <p class="text-[10px] text-gray-500 uppercase tracking-widest">Total Pendente</p>
                                    <p class="text-xl font-light text-white mt-0.5">R$ <span id="receber-valor" class="font-medium">—</span></p>
                                </div>
                                <span id="receber-badge" class="text-[10px] px-2.5 py-1 rounded-full font-medium badge-info">— contas</span>
                            </div>
                            <div class="h-px bg-gray-800/60"></div>
                            <div class="flex items-center justify-between">
                                <p class="text-[10px] text-gray-500 uppercase tracking-widest">Resumo do caixa</p>
                                <a href="caixa-geral.html" class="text-[10px] text-gray-500 hover:text-white transition-colors flex items-center gap-1">
                                    Ver detalhes <span class="material-icons text-xs">arrow_forward</span>
                                </a>
                            </div>
                            <div class="flex gap-3">
                                <div class="flex-1 bg-brand-black rounded-lg px-3 py-2">
                                    <p class="text-[9px] text-gray-600 uppercase tracking-widest">Entradas hoje</p>
                                    <p class="text-sm font-medium text-white mt-0.5">R$ <span id="caixa-entradas-hoje">—</span></p>
                                </div>
                                <div class="flex-1 bg-brand-black rounded-lg px-3 py-2">
                                    <p class="text-[9px] text-gray-600 uppercase tracking-widest">Saídas hoje</p>
                                    <p class="text-sm font-medium text-white mt-0.5">R$ <span id="caixa-saidas-hoje">—</span></p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ── LINHA 3: PEDIDOS RECENTES + ESTOQUE ALERTAS ── -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 opacity-0 animate-fade-in-up" style="animation-delay:0.26s;">

                    <!-- Pedidos Recentes -->
                    <div class="card-glow bg-brand-gray/50 backdrop-blur-sm border border-gray-800/80 rounded-xl overflow-hidden">
                        <div class="px-5 py-4 border-b border-gray-800/60 flex items-center justify-between">
                            <div>
                                <p class="text-xs font-medium text-white tracking-wide">Pedidos Recentes</p>
                                <p class="text-[10px] text-gray-500 mt-0.5">Últimos pedidos do sistema</p>
                            </div>
                            <a href="vendas-ecommerce.html" class="text-[10px] text-gray-500 hover:text-white transition-colors flex items-center gap-1">
                                Ver todos <span class="material-icons text-xs">arrow_forward</span>
                            </a>
                        </div>
                        <div id="lista-pedidos" class="divide-y divide-gray-900/60 min-h-[180px]">
                            <div class="p-4 space-y-2">
                                <div class="skeleton h-5 w-full"></div>
                                <div class="skeleton h-5 w-5/6"></div>
                                <div class="skeleton h-5 w-4/6"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Estoque em Alerta -->
                    <div class="card-glow bg-brand-gray/50 backdrop-blur-sm border border-gray-800/80 rounded-xl overflow-hidden">
                        <div class="px-5 py-4 border-b border-gray-800/60 flex items-center justify-between">
                            <div>
                                <p class="text-xs font-medium text-white tracking-wide">Estoque em Alerta</p>
                                <p class="text-[10px] text-gray-500 mt-0.5">Produtos abaixo do mínimo</p>
                            </div>
                            <a href="estoque.html" class="text-[10px] text-gray-500 hover:text-white transition-colors flex items-center gap-1">
                                Ver estoque <span class="material-icons text-xs">arrow_forward</span>
                            </a>
                        </div>
                        <div id="lista-alertas-estoque" class="divide-y divide-gray-900/60 min-h-[180px]">
                            <div class="p-4 space-y-2">
                                <div class="skeleton h-5 w-full"></div>
                                <div class="skeleton h-5 w-5/6"></div>
                                <div class="skeleton h-5 w-4/6"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ── LINHA 4: RESUMO DO ESTOQUE ── -->
                <div class="grid grid-cols-2 lg:grid-cols-4 gap-4 opacity-0 animate-fade-in-up" style="animation-delay:0.34s;">
                    <div class="bg-brand-gray/30 border border-gray-800/60 rounded-xl px-5 py-4">
                        <p class="text-[10px] text-gray-500 uppercase tracking-widest">Total Produtos</p>
                        <h4 class="text-2xl font-light text-white mt-1"><span id="resumo-produtos">—</span></h4>
                    </div>
                    <div class="bg-brand-gray/30 border border-gray-800/60 rounded-xl px-5 py-4">
                        <p class="text-[10px] text-gray-500 uppercase tracking-widest">Variantes</p>
                        <h4 class="text-2xl font-light text-white mt-1"><span id="resumo-variantes">—</span></h4>
                    </div>
                    <div class="bg-brand-gray/30 border border-gray-800/60 rounded-xl px-5 py-4">
                        <p class="text-[10px] text-gray-500 uppercase tracking-widest">Itens em Estoque</p>
                        <h4 class="text-2xl font-light text-white mt-1"><span id="resumo-itens">—</span></h4>
                    </div>
                    <div class="bg-brand-gray/30 border border-gray-800/60 rounded-xl px-5 py-4">
                        <p class="text-[10px] text-gray-500 uppercase tracking-widest">Mov. Hoje</p>
                        <h4 class="text-2xl font-light text-white mt-1">
                            <span id="resumo-entradas-hoje" class="text-green-400/80">—</span>
                            <span class="text-gray-700 text-lg mx-1">/</span>
                            <span id="resumo-saidas-hoje" class="text-red-400/80">—</span>
                        </h4>
                        <p class="text-[9px] text-gray-600 mt-0.5">entradas / saídas</p>
                    </div>
                </div>

            </div>
            <div class="h-16"></div>
        </div><!-- /scroll -->
    </main>

</body>
</html>
